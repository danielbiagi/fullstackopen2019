(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),c=t.n(u),o=(t(5),t(15)),l=t(2),i=function(e){return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:e.value,onChange:e.handleFilterChange}))},m=function(e){var n=e.successMessage,t=e.errorMessage;return null===n&&null===t?null:null!==n?r.a.createElement("div",{className:"success"},n):r.a.createElement("div",{className:"error"},t)},d=function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.addName},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},s=function(e){return r.a.createElement("div",null,e.rows())},f=t(3),h=t.n(f),b="/api/persons",v=function(){return h.a.get(b).then(function(e){return e.data})},w=function(e){return h.a.post(b,e).then(function(e){return e.data})},p=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then(function(e){return e.data})},E=function(e,n){return h.a.delete("".concat(b,"/").concat(e)).then(function(e){return e.data})},g=function(){var e=Object(a.useState)(""),n=Object(l.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(l.a)(c,2),h=f[0],b=f[1],g=Object(a.useState)(""),j=Object(l.a)(g,2),O=j[0],N=j[1],C=Object(a.useState)([]),k=Object(l.a)(C,2),y=k[0],S=k[1],T=Object(a.useState)(null),x=Object(l.a)(T,2),M=x[0],I=x[1],B=Object(a.useState)(null),D=Object(l.a)(B,2),F=D[0],J=D[1];Object(a.useEffect)(function(){v().then(function(e){S(e)})},[]);var U=function(e){var n=y.find(function(n){return n.name===e.name}),t=Object(o.a)({},n,{number:e.number});p(n.id,t).then(function(n){S(y.map(function(t){return t.name!==e.name?t:n})),J(n.name+" number updated!"),setTimeout(function(){J(null)},5e3)}).catch(function(t){I("the person '".concat(n.name,"' was already deleted from server")),setTimeout(function(){I(null)},5e3),S(y.filter(function(n){return n.id!==e.id}))})},W=""===t?y:y.filter(function(e){return e.name.toUpperCase().includes(t.toUpperCase())}),P=function(){return W.map(function(e){return r.a.createElement("li",{key:e.id}," ",e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name," from phonebook?"))&&E(e.id).then(function(n){S(y.filter(function(n){return n.id!==e.id&&n})),J(e.name+" deleted!"),setTimeout(function(){J(null)},5e3)}).catch(function(n){I("the person '".concat(e.name,"' was already deleted from server")),setTimeout(function(){I(null)},5e3)})}(e)}},"delete"))})};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(m,{successMessage:F,errorMessage:M}),r.a.createElement(i,{value:t,handleFilterChange:function(e){u(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(d,{addName:function(e){return function(e){e.preventDefault();var n={name:h,number:O,id:y.length+1};-1!==y.findIndex(function(e){return e.name===n.name})?window.confirm(n.name+" is already added to phonebook, replace the old number with the new one?")&&U(n):-1!==y.findIndex(function(e){return e.number===n.number})?(I(n.number+" number exists for other person!"),setTimeout(function(){I(null)},5e3)):w(n).then(function(e){S(y.concat(e)),b(""),N(""),J(n.name+" created!"),setTimeout(function(){J(null)},5e3)})}(e)},newName:h,newNumber:O,handleNameChange:function(e){b(e.target.value)},handleNumberChange:function(e){N(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(s,{rows:function(){return P()}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},5:function(e,n,t){}},[[16,1,2]]]);
//# sourceMappingURL=main.6597e460.chunk.js.map